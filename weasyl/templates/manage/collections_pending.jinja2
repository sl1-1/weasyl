{% extends 'common/base.jinja2' %}
{% from 'common/stage_title.jinja2' import stage %}
{% from 'common/thumbnail_grid_item.jinja2' import list_item %}
{% block content %}
    {{ stage("Pending Collections", "Settings") }}
    <div id="manage-collections" class="content">
        {% if query %}
            <form method="POST">
                <input type="hidden" name="token" value="{{ TOKEN() }}"/>

                <div id="messages-checkboxes">
                    {% for i in query %}
                        {% set caption = "collection_pending" if i["collectorid"] == userid else "collection_requested" %}
                        {{ list_item(i, caption) }}
                    {% endfor %}

                    <div id="buttons">
                        <a class="button back" href="/manage/collections?feature=pending&amp;backid={{ query[0]['submitid'] }}">Back</a>
                        <button class="button" name="action" value="accept">Accept Selected</button>
                        <button class="button negative" name="action" value="reject" data-confirm="Are you sure you want to reject the selected collections?">Reject Selected</button>
                        <a class="button next" href="/manage/collections?feature=pending&amp;nextid={{ query[-1]['submitid'] }}">Next</a>
                    </div>
                </div>
            </form>
        {% else %}
            <p id="caption">There are no collections to display.</p>
        {% endif %}
    </div>
{% endblock %}